{"ast":null,"code":"var express = require(\"express\");\n\nconst router = express.Router();\n\nvar db = require(\"../dbseed\");\n\nvar multer = require(\"multer\");\n\nvar storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, \"public/company\");\n  },\n  filename: function (req, file, cb) {\n    cb(null, Date.now() + \"-\" + file.originalname);\n  }\n});\nvar upload = multer({\n  storage: storage\n}).single(\"file\");\nrouter.post(\"/uploadCompanyPicture\", function (req, res) {\n  upload(req, res, function (err) {\n    if (err instanceof multer.MulterError) {\n      return res.status(500).json(err);\n    } else if (err) {\n      return res.status(500).json(err);\n    }\n\n    console.log(req.file);\n    return res.status(200).send(req.file.filename);\n  });\n});\nmodule.exports = router;","map":{"version":3,"sources":["/Users/surbhi/Documents/STUDY/CMPE273/Projects/Handshake/backend/Routes/uploadCompanyPicture.js"],"names":["express","require","router","Router","db","multer","storage","diskStorage","destination","req","file","cb","filename","Date","now","originalname","upload","single","post","res","err","MulterError","status","json","console","log","send","module","exports"],"mappings":"AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAf;;AACA,IAAIC,EAAE,GAAGH,OAAO,CAAC,WAAD,CAAhB;;AACA,IAAII,MAAM,GAAGJ,OAAO,CAAC,QAAD,CAApB;;AAEA,IAAIK,OAAO,GAAGD,MAAM,CAACE,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,EAAE,UAASC,GAAT,EAAcC,IAAd,EAAoBC,EAApB,EAAwB;AACnCA,IAAAA,EAAE,CAAC,IAAD,EAAO,gBAAP,CAAF;AACD,GAH8B;AAI/BC,EAAAA,QAAQ,EAAE,UAASH,GAAT,EAAcC,IAAd,EAAoBC,EAApB,EAAwB;AAChCA,IAAAA,EAAE,CAAC,IAAD,EAAOE,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBJ,IAAI,CAACK,YAA/B,CAAF;AACD;AAN8B,CAAnB,CAAd;AAQA,IAAIC,MAAM,GAAGX,MAAM,CAAC;AAAEC,EAAAA,OAAO,EAAEA;AAAX,CAAD,CAAN,CAA6BW,MAA7B,CAAoC,MAApC,CAAb;AAEAf,MAAM,CAACgB,IAAP,CAAY,uBAAZ,EAAqC,UAAST,GAAT,EAAcU,GAAd,EAAmB;AACtDH,EAAAA,MAAM,CAACP,GAAD,EAAMU,GAAN,EAAW,UAASC,GAAT,EAAc;AAC7B,QAAIA,GAAG,YAAYf,MAAM,CAACgB,WAA1B,EAAuC;AACrC,aAAOF,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB,CAAP;AACD,KAFD,MAEO,IAAIA,GAAJ,EAAS;AACd,aAAOD,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB,CAAP;AACD;;AACDI,IAAAA,OAAO,CAACC,GAAR,CAAYhB,GAAG,CAACC,IAAhB;AAEA,WAAOS,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBI,IAAhB,CAAqBjB,GAAG,CAACC,IAAJ,CAASE,QAA9B,CAAP;AACD,GATK,CAAN;AAUD,CAXD;AAaAe,MAAM,CAACC,OAAP,GAAiB1B,MAAjB","sourcesContent":["var express = require(\"express\");\nconst router = express.Router();\nvar db = require(\"../dbseed\");\nvar multer = require(\"multer\");\n\nvar storage = multer.diskStorage({\n  destination: function(req, file, cb) {\n    cb(null, \"public/company\");\n  },\n  filename: function(req, file, cb) {\n    cb(null, Date.now() + \"-\" + file.originalname);\n  }\n});\nvar upload = multer({ storage: storage }).single(\"file\");\n\nrouter.post(\"/uploadCompanyPicture\", function(req, res) {\n  upload(req, res, function(err) {\n    if (err instanceof multer.MulterError) {\n      return res.status(500).json(err);\n    } else if (err) {\n      return res.status(500).json(err);\n    }\n    console.log(req.file);\n\n    return res.status(200).send(req.file.filename);\n  });\n});\n\nmodule.exports = router;\n"]},"metadata":{},"sourceType":"script"}